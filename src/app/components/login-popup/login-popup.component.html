<div class="login-modal">
  <button class="close-btn" aria-label="Cerrar">&times;</button>
  <h2 class="login-title">SIGN IN TO CONTINUE</h2>
  <div class="login-actions">
    <button class="login-main-btn">
      <span class="icon-lightning"></span> Quick Login
    </button>
    <button class="login-main-btn">
      <span class="icon-phone"></span> Login with verification code
    </button>
  </div>
  <div class="login-info">
    <span>Game not installed?</span>
    <button class="download-btn">DOWNLOAD</button>
  </div>
  <div class="login-social">
    <span>Switch Account</span>
    <button class="social-btn fb">f</button>
    <button class="social-btn google">G</button>
  </div>
</div>

<!-- Modal de inicio de sesiÃ³n tipo Mobile Legends -->
<div class="login-modal">
  <button class="close-btn" aria-label="Cerrar" (click)="close()">&times;</button>
  <h2 class="login-title">SIGN IN TO CONTINUE</h2>

  <!-- Vista principal de opciones -->
  <ng-container *ngIf="currentView === 'main'">
    <div class="login-actions">
      <button class="login-main-btn" (click)="goToForm()">
        <span class="icon-lightning"></span> Quick Login
      </button>
      <button class="login-main-btn" (click)="goToForm()">
        <span class="icon-phone"></span> Login with verification code
      </button>
    </div>
    <div class="login-info">
      <span>Game not installed?</span>
      <button class="download-btn" (click)="openDownload()">DOWNLOAD</button>
    </div>
    <div class="login-social" *ngIf="!showSocialModal">
      <span>Switch Account</span>
      <button class="social-btn fb" (click)="loginWithSocial('facebook')">f</button>
      <button class="social-btn google" (click)="loginWithSocial('google')">G</button>
    </div>
    <app-social-login-modal
      *ngIf="showSocialModal"
      [provider]="showSocialModal"
      [visible]="true"
      (close)="onSocialModalClose()"
      (success)="onSocialModalSuccess()"
    ></app-social-login-modal>
  </ng-container>

  <!-- Vista de formulario de login -->
  <ng-container *ngIf="currentView === 'form'">
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
      <div class="form-group">
        <label for="gameId">GAME ID</label>
        <input id="gameId" formControlName="gameId" type="text" maxlength="12" />
        <div class="error" *ngIf="loginForm.get('gameId')?.invalid && loginForm.get('gameId')?.touched">Enter a valid Game ID</div>
      </div>
      <div class="form-group">
        <label for="serverId">SERVER ID</label>
        <input id="serverId" formControlName="serverId" type="text" maxlength="4" />
        <div class="error" *ngIf="loginForm.get('serverId')?.invalid && loginForm.get('serverId')?.touched">Enter a valid Server ID</div>
      </div>
      <div class="form-group code-group">
        <label for="verificationCode">VERIFICATION CODE</label>
        <input id="verificationCode" formControlName="verificationCode" type="text" maxlength="8" />
        <button type="button" class="get-code-btn" [disabled]="codeSent || loginForm.get('gameId')?.invalid || loginForm.get('serverId')?.invalid" (click)="sendCode()">
          {{ codeSent ? (codeTimer + 's') : 'GET CODE' }}
        </button>
      </div>
      <div class="info-text">The verification code will be sent to your email or game (valid for 5 minutes).</div>
      <button class="sign-in-btn" type="submit" [disabled]="loginForm.invalid || loading">
        <span *ngIf="loading" class="spinner"></span>
        SIGN IN
      </button>
      <button class="download-btn" type="button" (click)="openDownload()">DOWNLOAD</button>
      <button class="back-btn" type="button" (click)="goToMain()">&larr; Back</button>
    </form>
  </ng-container>
</div>
